<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>CSGO Word Guess Game</title>

    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/style.css">

</head>
<body>

<div class="jumbotron">
    <h1><strong>CS:GO Word Guess Game</strong></h1>
    <h2>
        Try to guess the name of a weapon skin from CS:GO<br>
        Choose wisely, you only have a limit of 6 keys to guess with
    </h2>
</div>


<div class="container">
  <div class="row">

    <div class="col-2">
        <div id="alpha1Div"></div>
    </div>

    <div id="middleSec" class="col-8">

        <div class="row">
            <p id="myKeys"></p>
        </div>

        <div class="row">
            <div id="hold"></div>
        </div>
    </div>

    <div class="col-2">
        <div id="alpha2Div"></div>
    </div>
  </div>
</div>

<script type="text/javascript">

    // stores my word bank
    var wordbank = [
        "asiimov",
        "case-hardened",
        "fade",
        "crimson web",
        "boreal-forest",
        "fire serpent",
        "forest-ddpat",
        "anodzied navy",
        "atomic-alloy",
        "eco",
        "redline",
        "dragon lore",
        "hyperbeast",
        "man-o-war",
        "safari-mesh",
        "medusa",
        "golden-coil",
        "point-disarray",
        "elite-build",
        "storm",
        "colony",
        "sand-dune",
        "predator",
        "forest-leaves",
        "jungle-spray",
        "pulse",
        "spitfire",
        "doomkitty",
        "teardown",
        "guardian",
        "urban-ddpat",
        "cobalt-disruption",
    ];
    
    // stores letters in strings, useful for later
    var alpha1 = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m"];
    var alpha2 = ["n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];

    // correct answers
    var correct;
    // selected word word
    var word;
    // current guess
    var guess;
    // stored picked
    var guesses = [ ];
    // keys used as lives
    var keys;
    // stores correct guesses
    var counter;
    // space in a word
    var space;

    var showKeys = document.getElementById("myKeys");

    // creates list of letters user guesses from
    // list 1 from a - m
    function list1() {
        for (var i = 0; i < alpha1.length; i++) {
            document.getElementById("alpha1Div").innerHTML += "<button id='" + alpha1[i] + "'type='button' class='btn btn-primary'>" + alpha1[i] + "</button>" + "<br>";
        }
    }
    list1();
    // list 2 from n - z
    // correct array reference for id like above in function list1
    function list2() {
        for (var i = 0; i < alpha2.length; i++) {
            document.getElementById("alpha2Div").innerHTML += "<button type='button' class='btn btn-primary'>" + alpha2[i] + "</button>" + "<br>";
        }
    }
    list2();

    // display keys(lives) left
    comments = function () {
        showKeys.innerHTML = "You have " + keys + " keys remaining";
        if (keys < 1) {
            showKeys.innerHTML = "You lost!";
        }
        for (var i = 0; i < guesses.length; i++) {
            if (counter + space === guesses.length) {
                showKeys.innerHTML = "You won!";
            }
        }
    }

    //shows empty lines to guess on
    result = function () {
        wordHolder = document.getElementById('hold');
        correct = document.createElement('ul');

        for (var i = 0; i < word.length; i++) {
            correct.setAttribute('id', 'my-word');
            guess = document.createElement('li');
            guess.setAttribute('class', 'guess');
            // hyphen for any hyphens in words
            if (word[i] === "-") {
                guess.innerHTML = "-";
                space = 1;
            } 
            // underscore for normal letters
            else {
                guess.innerHTML = "_";
            }
        

        guesses.push(guess);
        wordHolder.appendChild(correct);
        correct.appendChild(guess);
        }
    }


    // performs a check on click
    check1 = function () {
      list1.onclick = function () {
        console.log(this);
        var guess = (this.innerHTML);
        this.setAttribute("class", "active");
        this.onclick = null;
        // if guess is correct, add 1 to score
        for (var i = 0; i < word.length; i++) {
            if (word[i] === guess) {
                guesses[i].innerHTML = guess;
                counter += 1;
            }
        }
        // if guess is not correct, deduct 1 key
        var x = (word.indexOf(guess));
        if (x === -1) {
            keys -= 1;
            outcome();
        } else {
            outcome();
        }
      }
    }

    document.onkeypress = function (event) {
        var selectedKey = event.key
    }

    // check1(); // will point to the window if the function is no attached to any object

    // create a function that executes when a button is clicked
        // which button? the button with the letter attached as text
        // attach that function to the button we identified
        // we can do that using it's id and then we can grab the text out from that element


//     document.getElementById("alpha1Div").onclick = function() {check()};

//     function check() {
//      var guess = document.getElementById("alpha1Div").innerHTML;
//      console.log(guess);

// }

    check2 = function () {
      list2.onclick = function () {
        var guess = (this.innerHTML);
        this.setAttribute("class", "active");
        this.onclick = null;
        // if guess is correct, add 1 to score
        for (var i = 0; i < word.length; i++) {
            if (word[i] === guess) {
                guesses[i].innerHTML = guess;
                counter += 1;
            }
        }
        // if guess is not correct, deduct 1 key
        var x = (word.indexOf(guess));
        if (x === -1) {
            keys -= 1;
            outcome();
        } else {
            outcome();
        }
      }
    }

    // game initializing
    play = function () {
        word = wordbank[Math.floor(Math.random() * wordbank.length)];
        word = word.replace(/\s/g, "-");
        console.log(word);

        guesses = [ ];
        keys = 6;
        counter = 0;
        space = 0;
        result();
        comments();
    }
    play();

    // document.onkeyup=function(event){
    //     var userInput = event.key.toLowerCase();
    //     if (attemptsLeft === 0){
    //         console.log("gameover")
    //         lossesNum++;

    //         document.getElementById("loses").innerHTML = lossesNum;
    //         return false;  

</script>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</body>

</html>